<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin - Qu·∫£n l√Ω b√°n thu·ªëc</title>
    <link rel="stylesheet" href="../assets/css/admin.css" />
    <script src="../assets/js/admin.js"></script>
  </head>
  <script>
    document.addEventListener("DOMContentLoaded", async () => {
      const token = localStorage.getItem("token");
      if (token) {
        const res = await fetch("/api/users/profile", {
          headers: { Authorization: "Bearer " + token },
        });
        const user = await res.json();
        document.querySelector(".adminName").textContent = "Admin: " + user.name;
      }
    });
  </script>
  
  <body>
    <!-- Sidebar -->
    <div class="sidebar">
      <div class="logo">
        <img class="logo-img" src="../assets/img/logo.png" alt="logo" />
        <div class="text">
          <h1>NH√Ä THU·ªêC</h1>
          <h1>T·∫¨N T√ÇM</h1>
        </div>
        <div class="adminName">Admin: </div>
      </div>
      <ul class="nav-menu">
        <li id="nav-overview" class="active" onclick="showSection('overview')">
          <i>üìä</i> T·ªïng quan
        </li>
        <li id="nav-medicines" onclick="showSection('medicines')">
          <i>üíä</i> Qu·∫£n l√Ω thu·ªëc
        </li>
        <li id="nav-prescriptions" onclick="showSection('prescriptions')">
          <i>üìã</i> ƒê∆°n thu·ªëc
        </li>
        <li id="nav-customers" onclick="showSection('customers')">
          <i>üë•</i> Kh√°ch h√†ng
        </li>
        <li id="nav-posts" onclick="showSection('posts')">
          <i>üìù</i> B√†i vi·∫øt
        </li>
      </ul>
    </div>

    <!-- Main content -->
    <div class="main-content">
      <!-- T·ªïng quan -->
      <div class="content-section active" id="overview">
        <h1>
          T·ªïng quan
          <button id="resetBtn">
            <img
              src="../assets/img/reload.png"
              alt=""
              onclick="resetBtnClick()"
            />
          </button>
        </h1>
        <div class="overview-container">
          <div class="overview-card card-medicines">
            <h3>T·ªïng s·ªë thu·ªëc</h3>
            <span id="totalMedicines">...</span>
          </div>
          <div class="overview-card card-prescriptions">
            <h3>T·ªïng s·ªë ƒë∆°n thu·ªëc</h3>
            <span id="totalPrescriptions">...</span>
          </div>
          <div class="overview-card card-customers">
            <h3>T·ªïng s·ªë kh√°ch h√†ng</h3>
            <span id="totalCustomers">...</span>
          </div>
          <div class="overview-card card-posts">
            <h3>T·ªïng s·ªë b√†i vi·∫øt</h3>
            <span id="totalPosts">...</span>
          </div>
          <div class="overview-card card-revenue">
            <h3>Doanh thu h√¥m nay</h3>
            <span id="todayRevenue">... VNƒê</span>
          </div>
          <div class="overview-card card-pending">
            <h3>ƒê∆°n thu·ªëc ƒëang ch·ªù</h3>
            <span id="pendingPrescriptions">...</span>
          </div>
          <div class="overview-card card-low-stock">
            <h3>Thu·ªëc s·∫Øp h·∫øt h√†ng</h3>
            <span id="lowStockMedicines">...</span>
          </div>
          <div class="overview-card card-new-customers">
            <h3>Kh√°ch h√†ng m·ªõi h√¥m nay</h3>
            <span id="newCustomersToday">...</span>
          </div>
        </div>
      </div>

      <!-- Qu·∫£n l√Ω thu·ªëc -->
      <div class="content-section" id="medicines">
        <h1>Qu·∫£n l√Ω thu·ªëc</h1>
        <button class="addBtn" onclick="openAddMedicineModal()">
          Th√™m thu·ªëc
        </button>
        <table id="medicineTable">
          <thead>
            <tr>
              <th>ID</th>
              <th>T√™n thu·ªëc</th>
              <th>K√™ ƒë∆°n</th>
              <th>ƒê√≥ng g√≥i</th>
              <th>H√†nh ƒë·ªông</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <!-- ƒê∆°n thu·ªëc -->
      <div class="content-section" id="prescriptions">
        <h1>ƒê∆°n thu·ªëc</h1>
        
        <table id="prescriptionTable">
          <thead>
            <tr>
              <th>ID</th>
              <th>Kh√°ch h√†ng</th>
              <th>T·ªïng ti·ªÅn</th>
              <th>Tr·∫°ng th√°i</th>
              <th>H√†nh ƒë·ªông</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <!-- Kh√°ch h√†ng -->
      <div class="content-section" id="customers">
        <h1>Kh√°ch h√†ng</h1>
        <button class="addBtn" onclick="openAddCustomerModal()">
          Th√™m kh√°ch h√†ng
        </button>
        <table id="customerTable">
          <thead>
            <tr>
              <th>ID</th>
              <th>T√™n</th>
              <th>Email</th>
              <th>SƒêT</th>
              <th>H√†nh ƒë·ªông</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <!-- B√†i vi·∫øt -->
      <div class="content-section" id="posts">
        <h1>B√†i vi·∫øt</h1>
        <button class="addBtn" onclick="openAddPostModal()">
          Th√™m b√†i vi·∫øt
        </button>
        <table id="postTable">
          <thead>
            <tr>
              <th>ID</th>
              <th>Ti√™u ƒë·ªÅ</th>
              <th>N·ªôi dung</th>
              <th>Ng√†y ƒëƒÉng</th>
              <th>H√†nh ƒë·ªông</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>

    <!-- Modals -->
    <!-- Medicine Modals -->
    <div class="modal" id="medicineAddModal">
      <div class="modal-content">
        <h2>Th√™m thu·ªëc</h2>
        <label>ID:</label><input type="text" id="medicineAddId" />
        <label>T√™n thu·ªëc:</label><input type="text" id="medicineAddName" />
        <label>M√¥ t·∫£:</label><input type="text" id="medicineAddDescription" />
        <label>Gi√°:</label><input type="number" id="medicineAddPrice" />
        <label>S·ªë l∆∞·ª£ng:</label><input type="number" id="medicineAddQuantity" />
        <button class="save-btn" onclick="addMedicine()">Th√™m</button>
        <button class="cancel-btn" onclick="closeModal('medicineAddModal')">
          H·ªßy
        </button>
      </div>
    </div>
    <div class="modal" id="medicineViewModal">
      <div class="modal-content">
        <h2>Th√¥ng tin thu·ªëc</h2>
        <p id="medicineViewContent"></p>
        <button class="cancel-btn" onclick="closeModal('medicineViewModal')">
          ƒê√≥ng
        </button>
      </div>
    </div>
    <div class="modal" id="medicineEditModal">
      <div class="modal-content">
        <h2>S·ª≠a thu·ªëc</h2>
        <input type="hidden" id="medicineEditId" />
        <label>T√™n thu·ªëc:</label><input type="text" id="medicineEditName" />
        <label>M√¥ t·∫£:</label><input type="text" id="medicineEditDescription" />
        <label>Gi√°:</label><input type="number" id="medicineEditPrice" />
        <label>S·ªë l∆∞·ª£ng:</label
        ><input type="number" id="medicineEditQuantity" />
        <button class="save-btn" onclick="saveMedicine()">L∆∞u</button>
        <button class="cancel-btn" onclick="closeModal('medicineEditModal')">
          H·ªßy
        </button>
      </div>
    </div>
    <div class="modal" id="medicineDeleteModal">
      <div class="modal-content">
        <h2>X√°c nh·∫≠n x√≥a</h2>
        <p>B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a thu·ªëc n√†y kh√¥ng?</p>
        <button class="confirm-btn" onclick="deleteMedicine()">X√°c nh·∫≠n</button>
        <button class="cancel-btn" onclick="closeModal('medicineDeleteModal')">
          H·ªßy
        </button>
      </div>
    </div>

    <!-- Prescription Modals -->
    <div class="modal" id="prescriptionAddModal">
      <div class="modal-content">
        <h2>Th√™m ƒë∆°n thu·ªëc</h2>
        <label>ID:</label><input type="text" id="prescriptionAddId" />
        <label>Kh√°ch h√†ng:</label
        ><input type="text" id="prescriptionAddCustomer" />
        <label>T·ªïng ti·ªÅn:</label
        ><input type="number" id="prescriptionAddTotal" />
        <label>Tr·∫°ng th√°i:</label>
        <select id="prescriptionAddStatus">
          <option value="pending">Ch·ªù x·ª≠ l√Ω</option>
          <option value="processing">ƒêang x·ª≠ l√Ω</option>
          <option value="shipped">ƒê√£ giao</option>
          <option value="delivered">Ho√†n th√†nh</option>
          <option value="cancelled">H·ªßy</option>
        </select>
        <button class="save-btn" onclick="addPrescription()">Th√™m</button>
        <button class="cancel-btn" onclick="closeModal('prescriptionAddModal')">
          H·ªßy
        </button>
      </div>
    </div>
    <div class="modal" id="prescriptionViewModal">
      <div class="modal-content">
        <h2>Th√¥ng tin ƒë∆°n thu·ªëc</h2>
        <p id="prescriptionViewContent"></p>
        <button
          class="cancel-btn"
          onclick="closeModal('prescriptionViewModal')"
        >
          ƒê√≥ng
        </button>
      </div>
    </div>
    <div class="modal" id="prescriptionEditModal">
      <div class="modal-content">
        <h2>S·ª≠a ƒë∆°n thu·ªëc</h2>
        <input type="hidden" id="prescriptionEditId" />
        <label>Kh√°ch h√†ng:</label
        ><input type="text" id="prescriptionEditCustomer" />
        <label>T·ªïng ti·ªÅn:</label
        ><input type="number" id="prescriptionEditTotal" />
        <label>Tr·∫°ng th√°i:</label>
        <select id="prescriptionEditStatus">
          <option value="pending">Ch·ªù x·ª≠ l√Ω</option>
          <option value="processing">ƒêang x·ª≠ l√Ω</option>
          <option value="shipped">ƒê√£ giao</option>
          <option value="delivered">Ho√†n th√†nh</option>
          <option value="cancelled">H·ªßy</option>
        </select>
        <button class="save-btn" onclick="savePrescription()">L∆∞u</button>
        <button
          class="cancel-btn"
          onclick="closeModal('prescriptionEditModal')"
        >
          H·ªßy
        </button>
      </div>
    </div>
    <div class="modal" id="prescriptionDeleteModal">
      <div class="modal-content">
        <h2>X√°c nh·∫≠n x√≥a</h2>
        <p>B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a ƒë∆°n thu·ªëc n√†y kh√¥ng?</p>
        <button class="confirm-btn" onclick="deletePrescription()">
          X√°c nh·∫≠n
        </button>
        <button
          class="cancel-btn"
          onclick="closeModal('prescriptionDeleteModal')"
        >
          H·ªßy
        </button>
      </div>
    </div>

    <!-- Customer Modals -->
    <div class="modal" id="customerAddModal">
      <div class="modal-content">
        <h2>Th√™m kh√°ch h√†ng</h2>
        <label>ID:</label><input type="text" id="customerAddId" />
        <label>T√™n:</label><input type="text" id="customerAddName" />
        <label>Email:</label><input type="email" id="customerAddEmail" />
        <label>SƒêT:</label><input type="text" id="customerAddPhone" />
        <button class="save-btn" onclick="addCustomer()">Th√™m</button>
        <button class="cancel-btn" onclick="closeModal('customerAddModal')">
          H·ªßy
        </button>
      </div>
    </div>
    <div class="modal" id="customerViewModal">
      <div class="modal-content">
        <h2>Th√¥ng tin kh√°ch h√†ng</h2>
        <p id="customerViewContent"></p>
        <button class="cancel-btn" onclick="closeModal('customerViewModal')">
          ƒê√≥ng
        </button>
      </div>
    </div>
    <div class="modal" id="customerEditModal">
      <div class="modal-content">
        <h2>S·ª≠a kh√°ch h√†ng</h2>
        <input type="hidden" id="customerEditId" />
        <label>T√™n:</label><input type="text" id="customerEditName" />
        <label>Email:</label><input type="email" id="customerEditEmail" />
        <label>SƒêT:</label><input type="text" id="customerEditPhone" />
        <button class="save-btn" onclick="saveCustomer()">L∆∞u</button>
        <button class="cancel-btn" onclick="closeModal('customerEditModal')">
          H·ªßy
        </button>
      </div>
    </div>
    <div class="modal" id="customerDeleteModal">
      <div class="modal-content">
        <h2>X√°c nh·∫≠n x√≥a</h2>
        <p>B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a kh√°ch h√†ng n√†y kh√¥ng?</p>
        <button class="confirm-btn" onclick="deleteCustomer()">X√°c nh·∫≠n</button>
        <button class="cancel-btn" onclick="closeModal('customerDeleteModal')">
          H·ªßy
        </button>
      </div>
    </div>

    <!-- Post Modals -->
    <div class="modal" id="postAddModal">
      <div class="modal-content">
        <h2>Th√™m b√†i vi·∫øt</h2>
        <label>ID:</label><input type="text" id="postAddId" />
        <label>Ti√™u ƒë·ªÅ:</label><input type="text" id="postAddTitle" />
        <label>N·ªôi dung:</label><textarea id="postAddContent"></textarea>
        <label>Ng√†y ƒëƒÉng:</label><input type="date" id="postAddDate" />
        <button class="save-btn" onclick="addPost()">Th√™m</button>
        <button class="cancel-btn" onclick="closeModal('postAddModal')">
          H·ªßy
        </button>
      </div>
    </div>
    <div class="modal" id="postViewModal">
      <div class="modal-content">
        <h2>Th√¥ng tin b√†i vi·∫øt</h2>
        <p id="postViewContent"></p>
        <button class="cancel-btn" onclick="closeModal('postViewModal')">
          ƒê√≥ng
        </button>
      </div>
    </div>
    <div class="modal" id="postEditModal">
      <div class="modal-content">
        <h2>S·ª≠a b√†i vi·∫øt</h2>
        <input type="hidden" id="postEditId" />
        <label>Ti√™u ƒë·ªÅ:</label><input type="text" id="postEditTitle" />
        <label>N·ªôi dung:</label><textarea id="postEditContent"></textarea>
        <label>Ng√†y ƒëƒÉng:</label><input type="date" id="postEditDate" />
        <button class="save-btn" onclick="savePost()">L∆∞u</button>
        <button class="cancel-btn" onclick="closeModal('postEditModal')">
          H·ªßy
        </button>
      </div>
    </div>
    <div class="modal" id="postDeleteModal">
      <div class="modal-content">
        <h2>X√°c nh·∫≠n x√≥a</h2>
        <p>B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a b√†i vi·∫øt n√†y kh√¥ng?</p>
        <button class="confirm-btn" onclick="deletePost()">X√°c nh·∫≠n</button>
        <button class="cancel-btn" onclick="closeModal('postDeleteModal')">
          H·ªßy
        </button>
      </div>
    </div>
  </body>
</html>
