<!DOCTYPE html>
<html lang="vi">
  <head>
    <script src="../assets/js/main.js"></script>
    <!-- Import file JS -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nhà thuốc Tận Tâm</title>
    <link
      type="image/x-icon"
      href="../assets/img/logo.png"
      rel="shortcut icon"
    />
    <link rel="stylesheet" href="../assets/css/style.css" />
    <script src="../assets/js/main.js"></script>
  </head>
  <body>
    <!-- Header Top: Thông tin, Hotline, v.v. -->

    <div data-include="../components/header.html"></div>
    <!-- Nhúng Header -->

    <!-- Banner quảng cáo -->
    <div class="banner">
      <div class="container">
        <img
          src="https://via.placeholder.com/1200x200"
          alt="Banner quảng cáo"
        />
      </div>
    </div>
    <!-- Các chức năng hỗ trợ -->
    <section class="feature-boxes">
      <div class="container">
        <div class="feature-item">
          <div class="feature-icon">
            <img src="https://via.placeholder.com/50" alt="Cần mua thuốc" />
          </div>
          <p>Cần mua thuốc</p>
        </div>
        <div class="feature-item">
          <div class="feature-icon">
            <img
              src="https://via.placeholder.com/50"
              alt="Tư vấn với Dược Sỹ"
            />
          </div>
          <p>Tư vấn với Dược Sỹ</p>
        </div>
        <div class="feature-item">
          <div class="feature-icon">
            <img src="https://via.placeholder.com/50" alt="Tìm nhà thuốc" />
          </div>
          <p>Tìm nhà thuốc</p>
        </div>
        <div class="feature-item">
          <div class="feature-icon">
            <img src="https://via.placeholder.com/50" alt="Đơn của tôi" />
          </div>
          <p>Đơn của tôi</p>
        </div>
        <div class="feature-item">
          <div class="feature-icon">
            <img src="https://via.placeholder.com/50" alt="Kiểm tra sức khỏe" />
          </div>
          <p>Kiểm tra sức khỏe</p>
        </div>
      </div>
    </section>

    <!-- Khu vực các sản phẩm bán chạy -->
    <section class="best-sellers">
      <div class="container">
        <h2>Sản phẩm bán chạy</h2>
        <div class="product-grid" id="productGrid"></div>
        <button class="load-more" id="loadMoreBtn">Xem thêm</button>
      </div>
    </section>
    <script>
      let currentPage = 1;
      const productGrid = document.getElementById("productGrid");
      const loadMoreBtn = document.getElementById("loadMoreBtn");

      async function loadProducts() {
        try {
          const res = await fetch(
            `http://localhost:5000/api/products/page?page=${currentPage}&limit=12`
          );
          const products = await res.json();

          if (products.length === 0) {
            loadMoreBtn.style.display = "none";
            return;
          }

          products.forEach((product) => {
            const price = product.packagingUnits?.[0]?.price || 0;

            const card = document.createElement("div");
            card.className = "product-card";
            card.innerHTML = `
              <div class="product-image">
                <img src="${
                  product.images || "https://via.placeholder.com/200x200"
                }" alt="${product.name}" />
              </div>
              <div class="product-info">
                <h3>${product.name}</h3>
                <p class="price">${price.toLocaleString("vi-VN")}đ / <span>${
              product.packagingUnits?.[0]?.unitName
            }</span></p>
                <!-- button to add to cart -->
                <button class="add-to-cart" data-product-id="${
                  product.id
                }">Chọn mua</button>
              </div>
            `;
            productGrid.appendChild(card);
          });

          currentPage++;
        } catch (err) {
          console.error("Lỗi khi tải sản phẩm:", err);
        }
      }

      loadMoreBtn.addEventListener("click", loadProducts);
      loadProducts(); // Tải trang đầu tiên khi load trang
    </script>

    <!-- Footer -->
    <footer class="footer">
      <div class="container footer-flex">
        <div class="footer-col">
          <h4>Về Chúng Tôi</h4>
          <ul>
            <li><a href="#">Giới thiệu</a></li>
            <li><a href="#">Hệ thống cửa hàng</a></li>
            <li><a href="#">Giấy phép kinh doanh</a></li>
            <li><a href="#">Kiểm tra hóa đơn điện tử</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h4>Danh Mục</h4>
          <ul>
            <li><a href="#">Thuốc</a></li>
            <li><a href="#">Thực phẩm chức năng</a></li>
            <li><a href="#">Dược mỹ phẩm</a></li>
            <li><a href="#">Chăm sóc cá nhân</a></li>
            <li><a href="#">Thiết bị y tế</a></li>
            <li><a href="#">Đặt thuốc online</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h4>Thông Tin Khác</h4>
          <ul>
            <li><a href="#">Góc sức khỏe</a></li>
            <li><a href="#">Tra cứu thuốc</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h4>Kết Nối</h4>
          <ul>
            <li><a href="#">Facebook</a></li>
            <li><a href="#">Zalo</a></li>
            <li><a href="#">Ứng dụng </a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p>
          &copy; 2000 - 2025 Công ty Cổ phần Dược phẩm Tận Tâm. Địa chỉ: 12
          Nguyễn Văn Bảo, Phường 1, Quận Gò Vấp, TP. HCM
        </p>
        <p>
          Chăm sóc khách hàng:
          <a href="mailto:sale@nhathuoctantam.com.vn"
            >sale@nhathuoctantam.com.vn</a
          >
        </p>
      </div>
    </footer>
  </body>
</html>
